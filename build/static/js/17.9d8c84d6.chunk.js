(this.webpackJsonpagency_system=this.webpackJsonpagency_system||[]).push([[17],{324:function(e,t,c){"use strict";c.r(t),c.d(t,"default",(function(){return T}));var a=c(1),n=c.n(a),s=c(3),r=c(4),l=c(186),o=c(40),i=c.n(o),j=c(19),d=c(194),b=c(16),u=c(195),x=c(196),O=c(197),p=c(198),m=c(199),h=c(200),g=c(204),f=c(205),v=c.n(f),y=c(216),N=c.n(y),I=c(0);function w(e){var t=e.data,c=e.columns,s=n.a.createRef(),o=Object(l.a)().t,i=Object(a.useState)(),f=Object(r.a)(i,2),y=f[0],w=f[1],C=Object(a.useState)(),T=Object(r.a)(C,2),P=T[0],S=T[1],k=Object(d.useTable)({columns:c,data:t,initialState:{pageIndex:0}},d.useFilters,d.useGlobalFilter,d.useSortBy,d.usePagination),A=k.getTableProps,E=k.getTableBodyProps,R=k.headerGroups,H=k.prepareRow,Y=k.page,_=k.canPreviousPage,D=k.canNextPage,F=k.pageOptions,G=k.pageCount,V=k.gotoPage,B=k.nextPage,z=k.previousPage,M=k.setPageSize,J=k.preGlobalFilteredRows,L=k.setGlobalFilter,W=k.state,q=W.pageIndex,K=W.pageSize,Q=W.globalFilter,U=J.length,X=n.a.useState(Q),Z=Object(r.a)(X,2),$=Z[0],ee=Z[1],te=Object(d.useAsyncDebounce)((function(e){L(e||void 0)}),200),ce=Object(a.useState)([]),ae=Object(r.a)(ce,2),ne=ae[0],se=ae[1],re=Object(a.useState)(!1),le=Object(r.a)(re,2),oe=le[0],ie=le[1];return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("div",{className:"flex flex-row justify-between",children:[Object(I.jsx)("div",{className:"mb-5 mt-10 ",children:Object(I.jsx)(v.a,{trigger:function(){return Object(I.jsxs)("button",{className:"flex space-x-2 font-bold text-primary-default p-1 px-3 rounded",children:[Object(I.jsx)(b.InlineIcon,{icon:g.a,className:"text-xl"}),Object(I.jsx)("span",{children:o("PRINT")})]})},content:function(){return s}})}),Object(I.jsxs)("div",{className:"mb-5 mt-10",children:[o("SEARCH"),":"," ",Object(I.jsx)("input",{value:$||"",onChange:function(e){ee(e.target.value),te(e.target.value)},placeholder:"".concat(U," ").concat(o("RECORD"),"..."),className:"appearance-none rounded-r rounded-l sm:rounded-l-none border border-gray-400 border-b pl-8 pr-6 py-2 bg-white text-sm placeholder-gray-400 text-gray-700 focus:bg-white focus:placeholder-gray-600 focus:text-gray-700 focus:outline-none"}),Object(I.jsx)("h1",{className:"inline-block mx-10",children:"From:"}),Object(I.jsx)("input",{type:"date",onChange:function(e){w(e.target.value),console.log(y)}}),Object(I.jsx)("h1",{className:"inline-block mx-10",children:"To:"}),Object(I.jsx)("input",{type:"date",onChange:function(e){S(e.target.value),console.log(P)}}),Object(I.jsx)("button",{onClick:function(){return function(e,t){for(var c=[],a=N()(e),n=N()(t);a<=n;)c.push(N()(a).format("YYYY-MM-DD")),a=N()(a).add(1,"days");return se(ne=c),ie(!0),console.log(ne),c}(y,P)},children:"Search"})]})]}),Object(I.jsx)("div",{className:"flex flex-col mt-2 ",ref:function(e){return s=e},children:Object(I.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:Object(I.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:Object(I.jsx)("div",{className:"shadow border-b border-gray-200 sm:rounded-lg",children:Object(I.jsxs)("table",Object(j.a)(Object(j.a)({},A()),{},{className:"min-w-full divide-y divide-gray-200 ",children:[Object(I.jsx)("thead",{className:" bg-primary-default text-sm lg:text-md text-white ",children:R.map((function(e,t){return Object(I.jsxs)("tr",Object(j.a)(Object(j.a)({},e.getHeaderGroupProps()),{},{children:[e.headers.map((function(e,t){return Object(a.createElement)("th",Object(j.a)(Object(j.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{className:"px-6 py-3 text-left tracking-wider ",key:"column"+t}),e.render("Header")," ",Object(I.jsx)("span",{className:"inline-block",children:e.isSorted?e.isSortedDesc?Object(I.jsx)(b.InlineIcon,{icon:m.a}):Object(I.jsx)(b.InlineIcon,{icon:h.a}):""}))})),Object(I.jsx)("th",{className:"px-6 py-3 text-left tracking-wider"})]}),"row"+t)}))}),Object(I.jsx)("tbody",Object(j.a)(Object(j.a)({},E()),{},{children:oe?Y.filter((function(e){return ne.includes(e.values.date.split(" ")[0])})).map((function(e,t){return H(e),Object(I.jsx)("tr",Object(j.a)(Object(j.a)({},e.getRowProps()),{},{children:e.cells.map((function(e,t){return Object(a.createElement)("td",Object(j.a)(Object(j.a)({},e.getCellProps()),{},{className:"px-6 py-4 whitespace-nowrap max-w-sm ",key:"cell-"+t}),Object(I.jsx)("div",{className:"text-sm text-gray-900 overflow-x-hidden",children:e.render("Cell")}))}))}),"row-"+t)})):Y.map((function(e,t){return H(e),Object(I.jsx)("tr",Object(j.a)(Object(j.a)({},e.getRowProps()),{},{children:e.cells.map((function(e,t){return Object(a.createElement)("td",Object(j.a)(Object(j.a)({},e.getCellProps()),{},{className:"px-6 py-4 whitespace-nowrap max-w-sm ",key:"cell-"+t}),Object(I.jsx)("div",{className:"text-sm text-gray-900 overflow-x-hidden",children:e.render("Cell")}))}))}),"row-"+t)}))}))]}))})})})}),Object(I.jsxs)("div",{className:"px-4 flex flex-wrap space-y-2 space-x-2  mt-1",children:[Object(I.jsxs)("div",{className:"space-x-2 text-bold text-xl flex-1 flex",children:[Object(I.jsxs)("button",{onClick:function(){return V(0)},disabled:!_,children:[Object(I.jsx)("span",{className:"sr-only",children:"Next"}),Object(I.jsx)(b.InlineIcon,{icon:p.a})]}),Object(I.jsxs)("button",{onClick:function(){return z()},disabled:!_,children:[Object(I.jsx)("span",{className:"sr-only",children:"Next"}),Object(I.jsx)(b.InlineIcon,{icon:x.a})]}),Object(I.jsxs)("button",{onClick:function(){return B()},disabled:!D,children:[Object(I.jsx)("span",{className:"sr-only",children:"Next"}),Object(I.jsx)(b.InlineIcon,{icon:u.a})]}),Object(I.jsxs)("button",{onClick:function(){return V(G-1)},disabled:!D,children:[Object(I.jsx)("span",{className:"sr-only",children:"Next"}),Object(I.jsx)(b.InlineIcon,{icon:O.a})]})]}),Object(I.jsxs)("div",{className:"flex-1",children:[o("PAGE")," "," ",Object(I.jsxs)("strong",{children:[Object(I.jsx)("input",{className:" w-1/5 text-center border",type:"number",defaultValue:q+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;V(t)}})," of ",F.length]})]}),Object(I.jsx)("select",{value:K,onChange:function(e){M(Number(e.target.value))},className:" flex-1 p-1",children:[10,20,30,40,50].map((function(e){return Object(I.jsxs)("option",{value:e,children:[o("SHOW")," ",e]},e)}))})]})]})}var C=function(){var e=Object(l.a)().t,t=Object(a.useState)([]),c=Object(r.a)(t,2),s=c[0],o=c[1];Object(a.useEffect)((function(){(function(e){var t={method:"get",url:"http://3.1.5.196/api/activitylog/get-all-logs",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}};return i()(t)})(localStorage.getItem("token")).then((function(e){(null===e||void 0===e?void 0:e.data.error)||(console.log(e.data),e.data.filter((function(e){e.date="".concat(e.date)})),console.log(e.data),o(e.data))})).catch((function(e){return console.log(e)}))}),[]);var j=n.a.useMemo((function(){return[{Header:e("ACTIVITY_ID"),accessor:"id"},{Header:e("ACTIVITY_ACTION"),accessor:"action"},{Header:e("ACTIVITY_CREATE"),accessor:"action_by"},{Header:e("ACTIVITY_DESCRIPTION"),accessor:"description"},{Header:e("ACTIVITY_DATE"),accessor:"date"}]}),[]);return Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{className:"flex w-full",children:Object(I.jsx)("h1",{className:"flex-1 font-bold text-3xl text-yellow-lite",children:e("ACTIVITY_LOG")})}),Object(I.jsx)("div",{className:"mt-4"}),Object(I.jsx)(w,{data:s,columns:j})]})};function T(){var e=Object(s.j)().path;return Object(I.jsx)(I.Fragment,{children:Object(I.jsxs)(s.d,{children:[Object(I.jsx)(s.b,{exact:!0,path:"".concat(e,"/"),component:C}),Object(I.jsx)(s.a,{from:"*",to:"/404"})]})})}}}]);
//# sourceMappingURL=17.9d8c84d6.chunk.js.map